# Requirements Document

## Introduction

큰은혜교회 러닝크루 웹사이트를 AWS Amplify를 통해 배포하고, 멤버, 스케줄, 기록 등의 데이터를 S3 버킷을 이용해 직접 관리하는 기능을 구현합니다. 기존의 복잡한 Lambda/API Gateway 구조를 제거하고, Amplify 호스팅과 S3 직접 연동만을 사용하여 단순하고 효율적인 인프라를 구축합니다.

## Requirements

### Requirement 1

**User Story:** 개발자로서, AWS Amplify를 통해 웹사이트를 자동으로 배포하고 싶습니다. 그래야 코드 변경사항이 자동으로 반영되고 안정적인 호스팅 환경을 제공할 수 있습니다.

#### Acceptance Criteria

1. WHEN 코드가 Git 저장소에 푸시되면 THEN Amplify가 자동으로 빌드하고 배포해야 합니다
2. WHEN 배포가 완료되면 THEN 사용자가 HTTPS URL을 통해 웹사이트에 접근할 수 있어야 합니다
3. WHEN 빌드 과정에서 오류가 발생하면 THEN 이전 버전이 유지되고 오류 로그가 제공되어야 합니다
4. WHEN 사용자 정의 도메인이 설정되면 THEN SSL 인증서가 자동으로 적용되어야 합니다

### Requirement 2

**User Story:** 시스템 관리자로서, 멤버 데이터를 S3 버킷에 안전하게 저장하고 관리하고 싶습니다. 그래야 데이터 손실 없이 멤버 정보를 영구적으로 보관할 수 있습니다.

#### Acceptance Criteria

1. WHEN 새로운 멤버가 등록되면 THEN S3 버킷의 members.json 파일이 업데이트되어야 합니다
2. WHEN 멤버 정보가 수정되면 THEN S3에서 해당 멤버 데이터가 실시간으로 업데이트되어야 합니다
3. WHEN 멤버가 삭제되면 THEN S3에서 해당 멤버 데이터가 안전하게 제거되어야 합니다
4. IF S3 연결이 실패하면 THEN 사용자에게 연결 오류를 표시하고 재시도 옵션을 제공해야 합니다
5. WHEN 데이터를 불러올 때 THEN S3에서 최신 멤버 데이터를 가져와야 합니다

### Requirement 3

**User Story:** 러닝크루 멤버로서, 내 러닝 기록이 안전하게 클라우드에 저장되기를 원합니다. 그래야 기기를 바꿔도 내 기록을 잃지 않을 수 있습니다.

#### Acceptance Criteria

1. WHEN 러닝 기록을 추가하면 THEN S3 버킷의 records.json 파일에 저장되어야 합니다
2. WHEN 기록을 조회하면 THEN S3에서 최신 기록 데이터를 불러와야 합니다
3. WHEN 여러 사용자가 동시에 기록을 추가하면 THEN 데이터 충돌 없이 모든 기록이 저장되어야 합니다
4. WHEN 네트워크 연결이 불안정하면 THEN 사용자에게 연결 상태를 알리고 재시도 기능을 제공해야 합니다
5. IF 기록 데이터가 손상되면 THEN 백업 데이터에서 복구할 수 있어야 합니다

### Requirement 4

**User Story:** 러닝크루 관리자로서, 러닝 스케줄을 S3에 저장하고 관리하고 싶습니다. 그래야 모든 멤버가 동일한 스케줄 정보를 볼 수 있습니다.

#### Acceptance Criteria

1. WHEN 새로운 스케줄을 추가하면 THEN S3 버킷의 schedules.json 파일이 업데이트되어야 합니다
2. WHEN 스케줄을 수정하거나 삭제하면 THEN S3에서 실시간으로 반영되어야 합니다
3. WHEN 달력을 조회하면 THEN S3에서 최신 스케줄 데이터를 불러와야 합니다
4. WHEN 스케줄 데이터가 변경되면 THEN 모든 사용자에게 최신 정보가 표시되어야 합니다

### Requirement 5

**User Story:** 개발자로서, S3 버킷에 대한 적절한 권한 설정을 하고 싶습니다. 그래야 보안을 유지하면서도 필요한 데이터 접근이 가능합니다.

#### Acceptance Criteria

1. WHEN 웹 애플리케이션에서 S3에 접근하면 THEN IAM 역할을 통해 인증되어야 합니다
2. WHEN 데이터를 읽거나 쓸 때 THEN 최소 권한 원칙에 따라 필요한 권한만 부여되어야 합니다
3. WHEN 외부에서 S3 버킷에 직접 접근하려 하면 THEN 접근이 차단되어야 합니다
4. IF 권한이 없는 작업을 시도하면 THEN 적절한 오류 메시지가 표시되어야 합니다

### Requirement 6

**User Story:** 사용자로서, 데이터 로딩 상태를 명확히 알고 싶습니다. 그래야 시스템이 정상 작동하는지 확인할 수 있습니다.

#### Acceptance Criteria

1. WHEN 데이터를 로딩 중이면 THEN 로딩 인디케이터가 표시되어야 합니다
2. WHEN S3 연결이 실패하면 THEN 명확한 오류 메시지와 재시도 버튼이 표시되어야 합니다
3. WHEN 데이터 저장이 진행 중이면 THEN 저장 상태가 표시되어야 합니다
4. IF 오류가 발생하면 THEN 사용자 친화적인 오류 메시지와 해결 방법이 표시되어야 합니다

### Requirement 7

**User Story:** 개발자로서, 기존 로컬 스토리지 데이터를 S3로 일회성 마이그레이션하고 싶습니다. 그래야 기존 사용자들의 데이터를 잃지 않고 클라우드 전용 시스템으로 전환할 수 있습니다.

#### Acceptance Criteria

1. WHEN 애플리케이션이 처음 로드되면 THEN 로컬 스토리지에 기존 데이터가 있는지 확인해야 합니다
2. WHEN 로컬 데이터가 발견되면 THEN 사용자에게 S3로 마이그레이션할지 물어봐야 합니다
3. WHEN 마이그레이션을 선택하면 THEN 로컬 데이터를 S3로 안전하게 복사해야 합니다
4. WHEN 마이그레이션이 완료되면 THEN 로컬 스토리지를 완전히 정리해야 합니다
5. IF 마이그레이션을 거부하면 THEN 애플리케이션 사용을 제한하고 S3 연결을 요구해야 합니다